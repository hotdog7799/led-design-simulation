# ======================================================================================
# 1. 시뮬레이션 파라미터 및 최적화 설정
# ======================================================================================
# --- 광학계 기본 설정 ---
optics:
  phasemask_to_object_distance_mm: 6.0
  roi_width_mm: 11.0
  roi_height_mm: 12.3
  center_roi_ratio: 0.5

# --- 시나리오 설정 (A 또는 B의 주석을 선택하여 사용) ---
scenario:
  # --- 시나리오 A ---
  # type: 'A'
  # led_thickness_mm: 2.3
  # other_parts_thickness_mm: 0.1
  # cavity_width_mm: 6.45
  # cavity_height_mm: 3.63
  # actual_led_object_distance_mm: 3.6 # 6.0 - 0.1 - 2.3

  # --- 시나리오 B ---
  type: 'B'
  led_thickness_mm: 1.5
  other_parts_thickness_mm: 0.1
  camera_insertion_depth_mm: 1.0
  cavity_width_mm: 11.06
  cavity_height_mm: 10.81
  actual_led_object_distance_mm: 5.6 # 6.0 + 1.0 - 1.5

  # # --- Preset Original ---
  # type: 'Original'
  # led_thickenss_mm: 1.5
  # actual_led_object_distance_mm: 4.5 # 6.0 - 1.5
  # cavity_width_mm: 6.45
  # cavity_height_mm: 3.63
  # (a,b) = (1.53, 5.01)

# --- LED 특성 ---
led_specs:
  angles_original: [0, 10, 20, 30, 40, 50, 60, 70, 80, 90]
  # *** 참고: 원본 코드의 1.0, 0.99 사이에 쉼표가 없어 수정했습니다. ***
  intensities_original: [1.0, 0.99, 0.98, 0.95, 0.90, 0.82, 0.70, 0.50, 0.25, 0.0]
  passivation_spread_factor: 1.07
  single_led_total_power_mw: 15.832 # 보정된 값
  min_led_separation_mm: 2.5 # LED 물리적 최소 간격
  num_uv_leds: 4
  led_width_mm: 1.62 # 2.54
  led_height_mm: 1.62
  subsample_x: 5
  subsample_y: 3

# --- White LED 설정 ---
white_led:
  num_to_place: 4
  crosstalk_min_distance_mm: 5.0
  # x_offset_mm: 6.5 # X축 대칭 배치 위치 (a, b 최적화 시 사용)

# --- 시뮬레이션 정밀도 ---
simulation:
  resolution: 200
  grid_size_mm: 30
  mm_per_m: 1000.0

# --- 최적화 파라미터 탐색 범위 ---
optimization_ranges:
  a_range: {start: 1.0, stop: 8.1, step: 0.5}
  b_range: {start: 5.4, stop: 9.1, step: 0.5}
  
  # # for Preset Original
  # a_range: {start: 1.53, stop: 8.1, step: 100.0}
  # b_range: {start: 5.01, stop: 9.1, step: 100.0}

# --- Loss Function 가중치 (W_COUNT 제거) ---
loss_weights:
  TARGET_POWER_MW: 34.0

  W_POWER: 100.0
  W_POWER_CENTER: 400.0
  W_UNIFORMITY_OVERALL: 500.0 # 전체 영역 균일도
  W_UNIFORMITY_CENTER: 100.0 # 중앙부 균일도
  W_UNIFORMITY_WHITE: 200.0   # White LED 균일도
  
  # Hard constraint -> Pass/Fail로 변경
  # W_CROSSTALK: 10000000        # 배치 불가능 시 강력한 패널티 
  # W_center uniformity or/and center power: 가운데가 늘 어두워서 가운데가 좀 밝아지도록 되면 좋겠어.
  

# --- 로깅 설정 ---
logging:
  results_file: 'optimization_results_ab.csv'
  best_config_plot_file: 'best_config_plot.png'
  line_plots_file: 'best_config_line_plots.png'